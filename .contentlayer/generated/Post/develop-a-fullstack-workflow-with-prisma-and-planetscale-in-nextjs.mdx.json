{
  "title": "Develop a Fullstack workflow with Prisma and PlanetScale in Next.js",
  "date": "2021-09-27T00:00:00.000Z",
  "body": {
    "raw": "\n<Image\n  alt=\"Header\"\n  src=\"/static/blog/develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs/hugo-sousa-m7_lccaGaYA-unsplash.jpg\"\n  width={640}\n  height={932}\n/>\nPhoto by Hugo Sousa on [Unsplash](https://unsplash.com/photos/m7_lccaGaYA/share)\n\n<TOCInline toc={props.toc} asDisclosure />\n\n# Intro\n\nAfter [shamelessly copied the guestbook feature](/blog/over-engineering-thvu-dev#guestbook) from [Lee Robinson](https://twitter.com/leeerob), I was committed to creating something original for my site. Today, let's discuss how I created a workflow when developing an Endorsement System using the same powerful stack: Next.js + PlanetScale + Prisma. (We probably need a name for this stack soon). Visit [Endorsements](/endorsements) to see the result âœ¨.\n\n## The tech stack\n\n[PlanetScale](https://planetscale.com/) (still in beta) is a serverless database platform that is gaining interest amongst hobbyists in the industry lately for many good reasons: a generous free tier, the exciting [database branching model](https://docs.planetscale.com/concepts/branching), the scaling possibility, etc.\n\n[Prisma](https://www.prisma.io/) is a collection of tools that abstract away the complex works when working with a database for you: migrations, safe-typing, etc. It is a great complementary to TypeScript applications.\n\n## Database design for the Endorsement System\n\nAt first, I planned to have only two tables: `endorsements` and `skills` for the simplest form of implementation. Later, I have the chance to add `skill_category` in the mix for better visualization. Here's the database design in [dbdiagram.io](https://dbdiagram.io/home):\n\n<iframe width=\"100%\" height=\"315\" src=\"https://dbdiagram.io/embed/61518ce6825b5b014614a9d7\" />\n<br />\n\n# The workflow\n\n## Preparations (Do this once)\n\n- Register & create your database on PlanetScale.\n  - In Database -> Settings, you need to turn on **Automatically copy migration data**. Choose **Prisma** as Migration Framework. Save the settings.\n- Create a [shadow database](https://www.prisma.io/docs/concepts/components/prisma-migrate/shadow-database). Because PlanetScale is a cloud-hosted database, you need to create this manually: `pscale branch <branch> --database shadow`\n- Add these values to `.env`:\n\n```\nDATABASE_URL=\"mysql://root@127.0.0.1:3309/<db>\"\nSHADOW_DATABASE_URL=\"mysql://root@127.0.0.1:3310/<db>\"\n```\n\n- Prepare the `schema.prisma` file with the following configurations:\n\n```prisma\ngenerator client {\n  provider        = \"prisma-client-js\"\n  previewFeatures = [\"referentialIntegrity\"]\n}\n\ndatasource db {\n  provider             = \"mysql\"\n  url                  = env(\"DATABASE_URL\")\n  shadowDatabaseUrl    = env(\"SHADOW_DATABASE_URL\")\n  referentialIntegrity = \"prisma\"\n}\n```\n\nYou can read more about Referential Integrity in Preview in the [3.1.1 release note](https://github.com/prisma/prisma/releases/tag/3.1.1) of Prisma. They introduce this feature to work around PlanetScale limitation not support defining foreign keys.\n\n## Schema migration\n\n### TL;DR\n\nThe steps are:\n\n1. Create a new database branch on PlanetScale `pscale branch <branch> --database <database>`\n2. Connect to the newly created branch and shadow branch using two separate terminals:\n   - `pscale connect <database> <branch_name> --port 3309`\n   - `pscale connect <database> shadow --port 3310`\n3. Branch on git: `git branch new_branch`\n4. Start creating migrations by editing `schema.prisma`\n5. Run `npx prisma migrate dev --name <name>` in another terminal.\n6. Create deploy request: `pscale deploy-request create <database> <branch>`\n7. Merge the deploy request and PR on GitHub.\n8. Close the opened connections.\n9. Rinse and repeat.\n\n### Longer version - Endorsements\n\nAs I mentioned before, I initially wanted two databases for simplicity. My steps:\n\n- Create a branch on PlanetScale and named it `endorsements`.\n- Connect to that branch and the shadow branch using\n  - `pscale connect <database> endorsements --port 3309`\n  - `pscale connect <database> shadow --port 3310`\n- On my git feature branch, I edit the schema as follow:\n\n```prisma\nmodel skills {\n  id           BigInt         @id @default(autoincrement())\n  name         String         @db.VarChar(255)\n  endorsements endorsements[]\n  @@unique([name])\n}\n\nmodel endorsements {\n  id          BigInt  @id @default(autoincrement())\n  endorsed_by String  @db.VarChar(255)\n  email       String  @db.VarChar(255)\n  skill       skills? @relation(fields: [skill_id], references: [id])\n  skill_id     BigInt?\n}\n```\n\n- On point. After finished editing the schema, running Prisma Migrate: `npx prisma migrate dev --name endorsements` created a `<timestamp>_endorsements_migration.sql` file for me:\n\n```sql\n-- CreateTable\nCREATE TABLE `skills` (\n    `id` BIGINT NOT NULL AUTO_INCREMENT,\n    `name` VARCHAR(255) NOT NULL,\n\n    PRIMARY KEY (`id`)\n) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- CreateTable\nCREATE TABLE `endorsements` (\n    `id` BIGINT NOT NULL AUTO_INCREMENT,\n    `endorsed_by` VARCHAR(255) NOT NULL,\n    `skill_id` BIGINT,\n\n    PRIMARY KEY (`id`)\n) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n```\n\n- `endorsements` is ready to be merged to `main`! I can then shut down the two opened connections to `endorsements` and `shadow`, and also delete `endorsements`.\n\nThe rest of the feature is just Next.js you know and love: [API endpoints](https://nextjs.org/docs/api-routes/introduction), `getStaticProps`, etc. Check out [my first PR](https://github.com/ThangHuuVu/thvu-blog/pull/34/files) and [the follow-up PR](https://github.com/ThangHuuVu/thvu-blog/pull/48) for adding `skill_categories`.\n\n### Tips\n\n#### Mapping Prisma schema with the databases\n\nYou might want to name your database in a hyphen_case, while at the same time also want to stick with the Prisma schema naming convention using PascalCase as I do. In this case, use `@@map()`:\n\n```prisma {7, 19, 29} showLineNumbers\n\nmodel SkillCategory {\n  id                 BigInt  @id @default(autoincrement())\n  name               String  @db.VarChar(255)\n  skills_in_category Skill[]\n\n  @@map(name: \"skill_categories\")\n}\n\nmodel Skill {\n  id           BigInt        @id @default(autoincrement())\n  name         String        @db.VarChar(255)\n  endorsements Endorsement[]\n\n  skill_category    SkillCategory? @relation(fields: [skill_category_id], references: [id])\n  skill_category_id BigInt?\n\n  @@unique([name])\n  @@map(name: \"skills\")\n}\n\nmodel Endorsement {\n  id          BigInt  @id @default(autoincrement())\n  endorsed_by String  @db.VarChar(255)\n  email       String  @db.VarChar(255)\n  skill       Skill?  @relation(fields: [skill_id], references: [id])\n  skill_id    BigInt?\n\n  @@map(name: \"endorsements\")\n}\n```\n\n#### Manipulate data with Prisma Studio\n\nSo far we have used Prisma Schema and Prisma Migrate in our workflow. The third tool from Prisma is [Prisma Studio](https://www.prisma.io/studio), really useful when you want to do direct operations on the database. Make sure you have the correct `DATABASE_URL` in `.env` before firing this up.\n\n# Conclusion\n\nYou should be able to adapt the workflow and use it in your projects by the end of this article. Here's' the workflow again:\n\n1. Create a new database branch on PlanetScale `pscale branch <branch> --database <database>`\n2. Connect to the newly created branch and shadow branch using two separate terminals:\n   - `pscale connect <database> <branch_name> --port 3309`\n   - `pscale connect <database> shadow --port 3310`\n3. Branch on git: `git branch new_branch`\n4. Start creating migrations by editing `schema.prisma`\n5. Run `npx prisma migrate dev --name <name>` in another terminal.\n6. Create deploy request: `pscale deploy-request create <database> <branch>`\n7. Merge the deploy request and PR on GitHub.\n8. Close the opened connections.\n9. Rinse and repeat.\n\nThis workflow enabled a delightful Fullstack experience, as I hardly ever need to leave my VSCode & Terminal to change my schema. If you like this blog post, consider [endorse me](/endorsements)! ðŸ˜‰\n\nCheck out [David Parks's post](https://davidparks.dev/blog/planetscale-deployment-with-prisma/), he wrote an excellent article about the same subject. My article offers slightly newer information on how to set up Prisma regardings the `referentialIntegrity` value.\n\n# References\n\n- https://docs.planetscale.com/tutorials/automatic-prisma-migrations/\n- https://davidparks.dev/blog/planetscale-deployment-with-prisma/\n",
    "code": "var Component=(()=>{var dt=Object.create;var k=Object.defineProperty;var ct=Object.getOwnPropertyDescriptor;var ut=Object.getOwnPropertyNames;var mt=Object.getPrototypeOf,_t=Object.prototype.hasOwnProperty;var q=(d,t)=>()=>(t||d((t={exports:{}}).exports,t),t.exports),ft=(d,t)=>{for(var _ in t)k(d,_,{get:t[_],enumerable:!0})},Ne=(d,t,_,R)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let h of ut(t))!_t.call(d,h)&&h!==_&&k(d,h,{get:()=>t[h],enumerable:!(R=ct(t,h))||R.enumerable});return d};var bt=(d,t,_)=>(_=d!=null?dt(mt(d)):{},Ne(t||!d||!d.__esModule?k(_,\"default\",{value:d,enumerable:!0}):_,d)),pt=d=>Ne(k({},\"__esModule\",{value:!0}),d);var Ee=q((yt,ye)=>{ye.exports=React});var ge=q(H=>{\"use strict\";(function(){\"use strict\";var d=Ee(),t=Symbol.for(\"react.element\"),_=Symbol.for(\"react.portal\"),R=Symbol.for(\"react.fragment\"),h=Symbol.for(\"react.strict_mode\"),z=Symbol.for(\"react.profiler\"),K=Symbol.for(\"react.provider\"),X=Symbol.for(\"react.context\"),C=Symbol.for(\"react.forward_ref\"),S=Symbol.for(\"react.suspense\"),I=Symbol.for(\"react.suspense_list\"),P=Symbol.for(\"react.memo\"),D=Symbol.for(\"react.lazy\"),ve=Symbol.for(\"react.offscreen\"),J=Symbol.iterator,Oe=\"@@iterator\";function Ge(e){if(e===null||typeof e!=\"object\")return null;var n=J&&e[J]||e[Oe];return typeof n==\"function\"?n:null}var y=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function f(e){{for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];we(\"error\",e,r)}}function we(e,n,r){{var o=y.ReactDebugCurrentFrame,l=o.getStackAddendum();l!==\"\"&&(n+=\"%s\",r=r.concat([l]));var c=r.map(function(s){return String(s)});c.unshift(\"Warning: \"+n),Function.prototype.apply.call(console[e],console,c)}}var Te=!1,ke=!1,Se=!1,Ie=!1,De=!1,Z;Z=Symbol.for(\"react.module.reference\");function Fe(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===R||e===z||De||e===h||e===S||e===I||Ie||e===ve||Te||ke||Se||typeof e==\"object\"&&e!==null&&(e.$$typeof===D||e.$$typeof===P||e.$$typeof===K||e.$$typeof===X||e.$$typeof===C||e.$$typeof===Z||e.getModuleId!==void 0))}function Le(e,n,r){var o=e.displayName;if(o)return o;var l=n.displayName||n.name||\"\";return l!==\"\"?r+\"(\"+l+\")\":r}function Q(e){return e.displayName||\"Context\"}function j(e){if(e==null)return null;if(typeof e.tag==\"number\"&&f(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case R:return\"Fragment\";case _:return\"Portal\";case z:return\"Profiler\";case h:return\"StrictMode\";case S:return\"Suspense\";case I:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case X:var n=e;return Q(n)+\".Consumer\";case K:var r=e;return Q(r._context)+\".Provider\";case C:return Le(e,e.render,\"ForwardRef\");case P:var o=e.displayName||null;return o!==null?o:j(e.type)||\"Memo\";case D:{var l=e,c=l._payload,s=l._init;try{return j(s(c))}catch{return null}}}return null}var N=Object.assign,A=0,ee,te,ae,ne,re,oe,ie;function se(){}se.__reactDisabledLog=!0;function Ve(){{if(A===0){ee=console.log,te=console.info,ae=console.warn,ne=console.error,re=console.group,oe=console.groupCollapsed,ie=console.groupEnd;var e={configurable:!0,enumerable:!0,value:se,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}A++}}function Ye(){{if(A--,A===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:N({},e,{value:ee}),info:N({},e,{value:te}),warn:N({},e,{value:ae}),error:N({},e,{value:ne}),group:N({},e,{value:re}),groupCollapsed:N({},e,{value:oe}),groupEnd:N({},e,{value:ie})})}A<0&&f(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var F=y.ReactCurrentDispatcher,L;function v(e,n,r){{if(L===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\\n( *(at )?)/);L=o&&o[1]||\"\"}return`\n`+L+e}}var V=!1,O;{var Be=typeof WeakMap==\"function\"?WeakMap:Map;O=new Be}function le(e,n){if(!e||V)return\"\";{var r=O.get(e);if(r!==void 0)return r}var o;V=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var c;c=F.current,F.current=null,Ve();try{if(n){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(s,[])}catch(x){o=x}Reflect.construct(e,[],s)}else{try{s.call()}catch(x){o=x}e.call(s.prototype)}}else{try{throw Error()}catch(x){o=x}e()}}catch(x){if(x&&o&&typeof x.stack==\"string\"){for(var i=x.stack.split(`\n`),b=o.stack.split(`\n`),u=i.length-1,m=b.length-1;u>=1&&m>=0&&i[u]!==b[m];)m--;for(;u>=1&&m>=0;u--,m--)if(i[u]!==b[m]){if(u!==1||m!==1)do if(u--,m--,m<0||i[u]!==b[m]){var p=`\n`+i[u].replace(\" at new \",\" at \");return e.displayName&&p.includes(\"<anonymous>\")&&(p=p.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&O.set(e,p),p}while(u>=1&&m>=0);break}}}finally{V=!1,F.current=c,Ye(),Error.prepareStackTrace=l}var g=e?e.displayName||e.name:\"\",he=g?v(g):\"\";return typeof e==\"function\"&&O.set(e,he),he}function Ue(e,n,r){return le(e,!1)}function We(e){var n=e.prototype;return!!(n&&n.isReactComponent)}function G(e,n,r){if(e==null)return\"\";if(typeof e==\"function\")return le(e,We(e));if(typeof e==\"string\")return v(e);switch(e){case S:return v(\"Suspense\");case I:return v(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case C:return Ue(e.render);case P:return G(e.type,n,r);case D:{var o=e,l=o._payload,c=o._init;try{return G(c(l),n,r)}catch{}}}return\"\"}var w=Object.prototype.hasOwnProperty,de={},ce=y.ReactDebugCurrentFrame;function T(e){if(e){var n=e._owner,r=G(e.type,e._source,n?n.type:null);ce.setExtraStackFrame(r)}else ce.setExtraStackFrame(null)}function $e(e,n,r,o,l){{var c=Function.call.bind(w);for(var s in e)if(c(e,s)){var i=void 0;try{if(typeof e[s]!=\"function\"){var b=Error((o||\"React class\")+\": \"+r+\" type `\"+s+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[s]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw b.name=\"Invariant Violation\",b}i=e[s](n,s,o,r,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(u){i=u}i&&!(i instanceof Error)&&(T(l),f(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",o||\"React class\",r,s,typeof i),T(null)),i instanceof Error&&!(i.message in de)&&(de[i.message]=!0,T(l),f(\"Failed %s type: %s\",r,i.message),T(null))}}}var qe=Array.isArray;function Y(e){return qe(e)}function He(e){{var n=typeof Symbol==\"function\"&&Symbol.toStringTag,r=n&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return r}}function ze(e){try{return ue(e),!1}catch{return!0}}function ue(e){return\"\"+e}function me(e){if(ze(e))return f(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",He(e)),ue(e)}var M=y.ReactCurrentOwner,Ke={key:!0,ref:!0,__self:!0,__source:!0},_e,fe,B;B={};function Xe(e){if(w.call(e,\"ref\")){var n=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(n&&n.isReactWarning)return!1}return e.ref!==void 0}function Je(e){if(w.call(e,\"key\")){var n=Object.getOwnPropertyDescriptor(e,\"key\").get;if(n&&n.isReactWarning)return!1}return e.key!==void 0}function Ze(e,n){if(typeof e.ref==\"string\"&&M.current&&n&&M.current.stateNode!==n){var r=j(M.current.type);B[r]||(f('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',j(M.current.type),e.ref),B[r]=!0)}}function Qe(e,n){{var r=function(){_e||(_e=!0,f(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};r.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:r,configurable:!0})}}function et(e,n){{var r=function(){fe||(fe=!0,f(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};r.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:r,configurable:!0})}}var tt=function(e,n,r,o,l,c,s){var i={$$typeof:t,type:e,key:n,ref:r,props:s,_owner:c};return i._store={},Object.defineProperty(i._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(i,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(i,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:l}),Object.freeze&&(Object.freeze(i.props),Object.freeze(i)),i};function at(e,n,r,o,l){{var c,s={},i=null,b=null;r!==void 0&&(me(r),i=\"\"+r),Je(n)&&(me(n.key),i=\"\"+n.key),Xe(n)&&(b=n.ref,Ze(n,l));for(c in n)w.call(n,c)&&!Ke.hasOwnProperty(c)&&(s[c]=n[c]);if(e&&e.defaultProps){var u=e.defaultProps;for(c in u)s[c]===void 0&&(s[c]=u[c])}if(i||b){var m=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;i&&Qe(s,m),b&&et(s,m)}return tt(e,i,b,l,o,M.current,s)}}var U=y.ReactCurrentOwner,be=y.ReactDebugCurrentFrame;function E(e){if(e){var n=e._owner,r=G(e.type,e._source,n?n.type:null);be.setExtraStackFrame(r)}else be.setExtraStackFrame(null)}var W;W=!1;function $(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===t}function pe(){{if(U.current){var e=j(U.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function nt(e){{if(e!==void 0){var n=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),r=e.lineNumber;return`\n\nCheck your code at `+n+\":\"+r+\".\"}return\"\"}}var Re={};function rt(e){{var n=pe();if(!n){var r=typeof e==\"string\"?e:e.displayName||e.name;r&&(n=`\n\nCheck the top-level render call using <`+r+\">.\")}return n}}function je(e,n){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var r=rt(n);if(Re[r])return;Re[r]=!0;var o=\"\";e&&e._owner&&e._owner!==U.current&&(o=\" It was passed a child from \"+j(e._owner.type)+\".\"),E(e),f('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,o),E(null)}}function xe(e,n){{if(typeof e!=\"object\")return;if(Y(e))for(var r=0;r<e.length;r++){var o=e[r];$(o)&&je(o,n)}else if($(e))e._store&&(e._store.validated=!0);else if(e){var l=Ge(e);if(typeof l==\"function\"&&l!==e.entries)for(var c=l.call(e),s;!(s=c.next()).done;)$(s.value)&&je(s.value,n)}}}function ot(e){{var n=e.type;if(n==null||typeof n==\"string\")return;var r;if(typeof n==\"function\")r=n.propTypes;else if(typeof n==\"object\"&&(n.$$typeof===C||n.$$typeof===P))r=n.propTypes;else return;if(r){var o=j(n);$e(r,e.props,\"prop\",o,e)}else if(n.PropTypes!==void 0&&!W){W=!0;var l=j(n);f(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",l||\"Unknown\")}typeof n.getDefaultProps==\"function\"&&!n.getDefaultProps.isReactClassApproved&&f(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function it(e){{for(var n=Object.keys(e.props),r=0;r<n.length;r++){var o=n[r];if(o!==\"children\"&&o!==\"key\"){E(e),f(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",o),E(null);break}}e.ref!==null&&(E(e),f(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),E(null))}}function st(e,n,r,o,l,c){{var s=Fe(e);if(!s){var i=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(i+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var b=nt(l);b?i+=b:i+=pe();var u;e===null?u=\"null\":Y(e)?u=\"array\":e!==void 0&&e.$$typeof===t?(u=\"<\"+(j(e.type)||\"Unknown\")+\" />\",i=\" Did you accidentally export a JSX literal instead of a component?\"):u=typeof e,f(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",u,i)}var m=at(e,n,r,l,c);if(m==null)return m;if(s){var p=n.children;if(p!==void 0)if(o)if(Y(p)){for(var g=0;g<p.length;g++)xe(p[g],e);Object.freeze&&Object.freeze(p)}else f(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else xe(p,e)}return e===R?it(m):ot(m),m}}var lt=st;H.Fragment=R,H.jsxDEV=lt})()});var Me=q((gt,Ae)=>{\"use strict\";Ae.exports=ge()});var ht={};ft(ht,{default:()=>xt,frontmatter:()=>Rt});var a=bt(Me()),Rt={title:\"Develop a Fullstack workflow with Prisma and PlanetScale in Next.js\",date:\"2021-09-27\",tags:[\"Next.js\",\"Prisma\",\"PlanetScale\"],draft:!1,summary:\"Build Fullstack applications with confidence using the latest database technologies on the web. An example is an endorsements system I built for this site.\",images:[\"/static/blog/develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs/develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs.png\",\"/static/blog/develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs/hugo-sousa-m7_lccaGaYA-unsplash.jpg\"],layout:\"PostLayout\"};function Ce(d){let t=Object.assign({p:\"p\",a:\"a\",h1:\"h1\",h2:\"h2\",code:\"code\",ul:\"ul\",li:\"li\",strong:\"strong\",pre:\"pre\",h3:\"h3\",ol:\"ol\",h4:\"h4\"},d.components),{Image:_,TOCInline:R}=t;return _||Pe(\"Image\",!0,\"15:1-20:3\"),R||Pe(\"TOCInline\",!0,\"23:1-23:43\"),(0,a.jsxDEV)(a.Fragment,{children:[(0,a.jsxDEV)(_,{alt:\"Header\",src:\"/static/blog/develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs/hugo-sousa-m7_lccaGaYA-unsplash.jpg\",width:640,height:932},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"Photo by Hugo Sousa on \",(0,a.jsxDEV)(t.a,{href:\"https://unsplash.com/photos/m7_lccaGaYA/share\",children:\"Unsplash\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:21,columnNumber:24},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,a.jsxDEV)(R,{toc:d.toc,asDisclosure:!0},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h1,{children:\"Intro\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"After \",(0,a.jsxDEV)(t.a,{href:\"/blog/over-engineering-thvu-dev#guestbook\",children:\"shamelessly copied the guestbook feature\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:27,columnNumber:7},this),\" from \",(0,a.jsxDEV)(t.a,{href:\"https://twitter.com/leeerob\",children:\"Lee Robinson\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:27,columnNumber:98},this),\", I was committed to creating something original for my site. Today, let's discuss how I created a workflow when developing an Endorsement System using the same powerful stack: Next.js + PlanetScale + Prisma. (We probably need a name for this stack soon). Visit \",(0,a.jsxDEV)(t.a,{href:\"/endorsements\",children:\"Endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:27,columnNumber:403},this),\" to see the result \\u2728.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h2,{children:\"The tech stack\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[(0,a.jsxDEV)(t.a,{href:\"https://planetscale.com/\",children:\"PlanetScale\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:31,columnNumber:1},this),\" (still in beta) is a serverless database platform that is gaining interest amongst hobbyists in the industry lately for many good reasons: a generous free tier, the exciting \",(0,a.jsxDEV)(t.a,{href:\"https://docs.planetscale.com/concepts/branching\",children:\"database branching model\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:31,columnNumber:215},this),\", the scaling possibility, etc.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[(0,a.jsxDEV)(t.a,{href:\"https://www.prisma.io/\",children:\"Prisma\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:33,columnNumber:1},this),\" is a collection of tools that abstract away the complex works when working with a database for you: migrations, safe-typing, etc. It is a great complementary to TypeScript applications.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:33,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h2,{children:\"Database design for the Endorsement System\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:35,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"At first, I planned to have only two tables: \",(0,a.jsxDEV)(t.code,{children:\"endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:37,columnNumber:46},this),\" and \",(0,a.jsxDEV)(t.code,{children:\"skills\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:37,columnNumber:65},this),\" for the simplest form of implementation. Later, I have the chance to add \",(0,a.jsxDEV)(t.code,{children:\"skill_category\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:37,columnNumber:147},this),\" in the mix for better visualization. Here's the database design in \",(0,a.jsxDEV)(t.a,{href:\"https://dbdiagram.io/home\",children:\"dbdiagram.io\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:37,columnNumber:231},this),\":\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:37,columnNumber:1},this),`\n`,(0,a.jsxDEV)(\"iframe\",{width:\"100%\",height:\"315\",src:\"https://dbdiagram.io/embed/61518ce6825b5b014614a9d7\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:39,columnNumber:1},this),`\n`,(0,a.jsxDEV)(\"br\",{},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:40,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h1,{children:\"The workflow\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:42,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h2,{children:\"Preparations (Do this once)\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:44,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[\"Register & create your database on PlanetScale.\",`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[\"In Database -> Settings, you need to turn on \",(0,a.jsxDEV)(t.strong,{children:\"Automatically copy migration data\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:47,columnNumber:50},this),\". Choose \",(0,a.jsxDEV)(t.strong,{children:\"Prisma\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:47,columnNumber:96},this),\" as Migration Framework. Save the settings.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:47,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:47,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:46,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Create a \",(0,a.jsxDEV)(t.a,{href:\"https://www.prisma.io/docs/concepts/components/prisma-migrate/shadow-database\",children:\"shadow database\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:48,columnNumber:12},this),\". Because PlanetScale is a cloud-hosted database, you need to create this manually: \",(0,a.jsxDEV)(t.code,{children:\"pscale branch <branch> --database shadow\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:48,columnNumber:192},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:48,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Add these values to \",(0,a.jsxDEV)(t.code,{children:\".env\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:49,columnNumber:23},this),\":\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:49,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:46,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.pre,{children:(0,a.jsxDEV)(t.code,{children:`DATABASE_URL=\"mysql://root@127.0.0.1:3309/<db>\"\nSHADOW_DATABASE_URL=\"mysql://root@127.0.0.1:3310/<db>\"\n`},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:51,columnNumber:1},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:51,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[\"Prepare the \",(0,a.jsxDEV)(t.code,{children:\"schema.prisma\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:56,columnNumber:15},this),\" file with the following configurations:\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:56,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:56,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.pre,{children:(0,a.jsxDEV)(t.code,{className:\"language-prisma\",children:`generator client {\n  provider        = \"prisma-client-js\"\n  previewFeatures = [\"referentialIntegrity\"]\n}\n\ndatasource db {\n  provider             = \"mysql\"\n  url                  = env(\"DATABASE_URL\")\n  shadowDatabaseUrl    = env(\"SHADOW_DATABASE_URL\")\n  referentialIntegrity = \"prisma\"\n}\n`},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:58,columnNumber:1},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:58,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"You can read more about Referential Integrity in Preview in the \",(0,a.jsxDEV)(t.a,{href:\"https://github.com/prisma/prisma/releases/tag/3.1.1\",children:\"3.1.1 release note\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:72,columnNumber:65},this),\" of Prisma. They introduce this feature to work around PlanetScale limitation not support defining foreign keys.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:72,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h2,{children:\"Schema migration\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:74,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h3,{children:\"TL;DR\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:76,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:\"The steps are:\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:78,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ol,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[\"Create a new database branch on PlanetScale \",(0,a.jsxDEV)(t.code,{children:\"pscale branch <branch> --database <database>\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:80,columnNumber:48},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:80,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Connect to the newly created branch and shadow branch using two separate terminals:\",`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:(0,a.jsxDEV)(t.code,{children:\"pscale connect <database> <branch_name> --port 3309\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:82,columnNumber:6},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:82,columnNumber:4},this),`\n`,(0,a.jsxDEV)(t.li,{children:(0,a.jsxDEV)(t.code,{children:\"pscale connect <database> shadow --port 3310\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:83,columnNumber:6},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:83,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:82,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:81,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Branch on git: \",(0,a.jsxDEV)(t.code,{children:\"git branch new_branch\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:84,columnNumber:19},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:84,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Start creating migrations by editing \",(0,a.jsxDEV)(t.code,{children:\"schema.prisma\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:85,columnNumber:41},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:85,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Run \",(0,a.jsxDEV)(t.code,{children:\"npx prisma migrate dev --name <name>\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:86,columnNumber:8},this),\" in another terminal.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:86,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Create deploy request: \",(0,a.jsxDEV)(t.code,{children:\"pscale deploy-request create <database> <branch>\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:87,columnNumber:27},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:87,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"Merge the deploy request and PR on GitHub.\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:88,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"Close the opened connections.\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:89,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"Rinse and repeat.\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:90,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:80,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h3,{children:\"Longer version - Endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:92,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:\"As I mentioned before, I initially wanted two databases for simplicity. My steps:\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:94,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[\"Create a branch on PlanetScale and named it \",(0,a.jsxDEV)(t.code,{children:\"endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:96,columnNumber:47},this),\".\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:96,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Connect to that branch and the shadow branch using\",`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:(0,a.jsxDEV)(t.code,{children:\"pscale connect <database> endorsements --port 3309\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:98,columnNumber:5},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:98,columnNumber:3},this),`\n`,(0,a.jsxDEV)(t.li,{children:(0,a.jsxDEV)(t.code,{children:\"pscale connect <database> shadow --port 3310\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:99,columnNumber:5},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:99,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:98,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:97,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"On my git feature branch, I edit the schema as follow:\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:100,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:96,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.pre,{children:(0,a.jsxDEV)(t.code,{className:\"language-prisma\",children:`model skills {\n  id           BigInt         @id @default(autoincrement())\n  name         String         @db.VarChar(255)\n  endorsements endorsements[]\n  @@unique([name])\n}\n\nmodel endorsements {\n  id          BigInt  @id @default(autoincrement())\n  endorsed_by String  @db.VarChar(255)\n  email       String  @db.VarChar(255)\n  skill       skills? @relation(fields: [skill_id], references: [id])\n  skill_id     BigInt?\n}\n`},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:102,columnNumber:1},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:102,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[\"On point. After finished editing the schema, running Prisma Migrate: \",(0,a.jsxDEV)(t.code,{children:\"npx prisma migrate dev --name endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:119,columnNumber:72},this),\" created a \",(0,a.jsxDEV)(t.code,{children:\"<timestamp>_endorsements_migration.sql\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:119,columnNumber:127},this),\" file for me:\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:119,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:119,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.pre,{children:(0,a.jsxDEV)(t.code,{className:\"language-sql\",children:\"-- CreateTable\\nCREATE TABLE `skills` (\\n    `id` BIGINT NOT NULL AUTO_INCREMENT,\\n    `name` VARCHAR(255) NOT NULL,\\n\\n    PRIMARY KEY (`id`)\\n) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\\n\\n-- CreateTable\\nCREATE TABLE `endorsements` (\\n    `id` BIGINT NOT NULL AUTO_INCREMENT,\\n    `endorsed_by` VARCHAR(255) NOT NULL,\\n    `skill_id` BIGINT,\\n\\n    PRIMARY KEY (`id`)\\n) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\\n\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:121,columnNumber:1},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:121,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[(0,a.jsxDEV)(t.code,{children:\"endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:140,columnNumber:3},this),\" is ready to be merged to \",(0,a.jsxDEV)(t.code,{children:\"main\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:140,columnNumber:43},this),\"! I can then shut down the two opened connections to \",(0,a.jsxDEV)(t.code,{children:\"endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:140,columnNumber:102},this),\" and \",(0,a.jsxDEV)(t.code,{children:\"shadow\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:140,columnNumber:121},this),\", and also delete \",(0,a.jsxDEV)(t.code,{children:\"endorsements\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:140,columnNumber:147},this),\".\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:140,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:140,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"The rest of the feature is just Next.js you know and love: \",(0,a.jsxDEV)(t.a,{href:\"https://nextjs.org/docs/api-routes/introduction\",children:\"API endpoints\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:142,columnNumber:60},this),\", \",(0,a.jsxDEV)(t.code,{children:\"getStaticProps\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:142,columnNumber:126},this),\", etc. Check out \",(0,a.jsxDEV)(t.a,{href:\"https://github.com/ThangHuuVu/thvu-blog/pull/34/files\",children:\"my first PR\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:142,columnNumber:159},this),\" and \",(0,a.jsxDEV)(t.a,{href:\"https://github.com/ThangHuuVu/thvu-blog/pull/48\",children:\"the follow-up PR\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:142,columnNumber:232},this),\" for adding \",(0,a.jsxDEV)(t.code,{children:\"skill_categories\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:142,columnNumber:311},this),\".\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:142,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h3,{children:\"Tips\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:144,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h4,{children:\"Mapping Prisma schema with the databases\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:146,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"You might want to name your database in a hyphen_case, while at the same time also want to stick with the Prisma schema naming convention using PascalCase as I do. In this case, use \",(0,a.jsxDEV)(t.code,{children:\"@@map()\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:148,columnNumber:183},this),\":\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:148,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.pre,{children:(0,a.jsxDEV)(t.code,{className:\"language-prisma\",children:`\nmodel SkillCategory {\n  id                 BigInt  @id @default(autoincrement())\n  name               String  @db.VarChar(255)\n  skills_in_category Skill[]\n\n  @@map(name: \"skill_categories\")\n}\n\nmodel Skill {\n  id           BigInt        @id @default(autoincrement())\n  name         String        @db.VarChar(255)\n  endorsements Endorsement[]\n\n  skill_category    SkillCategory? @relation(fields: [skill_category_id], references: [id])\n  skill_category_id BigInt?\n\n  @@unique([name])\n  @@map(name: \"skills\")\n}\n\nmodel Endorsement {\n  id          BigInt  @id @default(autoincrement())\n  endorsed_by String  @db.VarChar(255)\n  email       String  @db.VarChar(255)\n  skill       Skill?  @relation(fields: [skill_id], references: [id])\n  skill_id    BigInt?\n\n  @@map(name: \"endorsements\")\n}\n`},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:150,columnNumber:1},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:150,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h4,{children:\"Manipulate data with Prisma Studio\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:183,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"So far we have used Prisma Schema and Prisma Migrate in our workflow. The third tool from Prisma is \",(0,a.jsxDEV)(t.a,{href:\"https://www.prisma.io/studio\",children:\"Prisma Studio\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:185,columnNumber:101},this),\", really useful when you want to do direct operations on the database. Make sure you have the correct \",(0,a.jsxDEV)(t.code,{children:\"DATABASE_URL\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:185,columnNumber:248},this),\" in \",(0,a.jsxDEV)(t.code,{children:\".env\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:185,columnNumber:266},this),\" before firing this up.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:185,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h1,{children:\"Conclusion\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:187,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:\"You should be able to adapt the workflow and use it in your projects by the end of this article. Here's' the workflow again:\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:189,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ol,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:[\"Create a new database branch on PlanetScale \",(0,a.jsxDEV)(t.code,{children:\"pscale branch <branch> --database <database>\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:191,columnNumber:48},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:191,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Connect to the newly created branch and shadow branch using two separate terminals:\",`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:(0,a.jsxDEV)(t.code,{children:\"pscale connect <database> <branch_name> --port 3309\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:193,columnNumber:6},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:193,columnNumber:4},this),`\n`,(0,a.jsxDEV)(t.li,{children:(0,a.jsxDEV)(t.code,{children:\"pscale connect <database> shadow --port 3310\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:194,columnNumber:6},this)},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:194,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:193,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:192,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Branch on git: \",(0,a.jsxDEV)(t.code,{children:\"git branch new_branch\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:195,columnNumber:19},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:195,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Start creating migrations by editing \",(0,a.jsxDEV)(t.code,{children:\"schema.prisma\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:196,columnNumber:41},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:196,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Run \",(0,a.jsxDEV)(t.code,{children:\"npx prisma migrate dev --name <name>\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:197,columnNumber:8},this),\" in another terminal.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:197,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:[\"Create deploy request: \",(0,a.jsxDEV)(t.code,{children:\"pscale deploy-request create <database> <branch>\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:198,columnNumber:27},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:198,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"Merge the deploy request and PR on GitHub.\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:199,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"Close the opened connections.\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:200,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"Rinse and repeat.\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:201,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:191,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"This workflow enabled a delightful Fullstack experience, as I hardly ever need to leave my VSCode & Terminal to change my schema. If you like this blog post, consider \",(0,a.jsxDEV)(t.a,{href:\"/endorsements\",children:\"endorse me\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:203,columnNumber:168},this),\"! \\u{1F609}\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:203,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:[\"Check out \",(0,a.jsxDEV)(t.a,{href:\"https://davidparks.dev/blog/planetscale-deployment-with-prisma/\",children:\"David Parks's post\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:205,columnNumber:11},this),\", he wrote an excellent article about the same subject. My article offers slightly newer information on how to set up Prisma regardings the \",(0,a.jsxDEV)(t.code,{children:\"referentialIntegrity\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:205,columnNumber:236},this),\" value.\"]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:205,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h1,{children:\"References\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:207,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.ul,{children:[`\n`,(0,a.jsxDEV)(t.li,{children:\"https://docs.planetscale.com/tutorials/automatic-prisma-migrations/\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:209,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.li,{children:\"https://davidparks.dev/blog/planetscale-deployment-with-prisma/\"},void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:210,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:209,columnNumber:1},this)]},void 0,!0,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\",lineNumber:1,columnNumber:1},this)}function jt(d={}){let{wrapper:t}=d.components||{};return t?(0,a.jsxDEV)(t,Object.assign({},d,{children:(0,a.jsxDEV)(Ce,d,void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\"},this)}),void 0,!1,{fileName:\"E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx\"},this):Ce(d)}var xt=jt;function Pe(d,t,_){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+d+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(_?\"\\nIt\\u2019s referenced in your code at `\"+_+\"` in `E:\\\\PROGRAMARE_My_Codes\\\\React.js_Next.js_projects\\\\my-static-nextjs13-portfolio\\\\data\\\\blog\\\\_mdx_bundler_entry_point-19bf484a-49d6-452e-bfe4-46a49e1aa528.mdx`\":\"\"))}return pt(ht);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs.mdx",
  "_raw": {
    "sourceFilePath": "develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs.mdx",
    "sourceFileName": "develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs.mdx",
    "sourceFileDir": ".",
    "contentType": "mdx",
    "flattenedPath": "develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs"
  },
  "type": "Post",
  "url": "/blog/develop-a-fullstack-workflow-with-prisma-and-planetscale-in-nextjs"
}